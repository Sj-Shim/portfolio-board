<?xml version="1.0" encoding="UTF-8" ?>
<thlogic>
    <attr sel="#header" th:replace="header :: #header" />
    <attr sel="#footer" th:replace="footer :: #footer" />

    <attr sel=".board-article-list">
        <attr sel=".board-title">
            <attr sel=".left">
                <attr sel=".channel-icon-link" th:href="@{${chanInfo.slug}}">
                    <attr sel=".text-icon" th:text="${#strings.substring(chanInfo.channelName, 0, 1)}" />
                </attr>
            </attr>
            <attr sel=".head">
                <attr sel=".title" th:href="@{'/'+${chanInfo.slug}}" th:data-channel="${chanInfo.channelName}+'채널'">
                    <attr sel="span" th:title="${chanInfo.channelName}+' 채널'" th:text="${chanInfo.channelName}+' 채널'"/>
                </attr>
                <attr sel=".buttons">
                    <attr sel=".subscribe-btn" th:href="@{'/'+${chanInfo.slug}+'/subscribe'}" th:data-chan="${chanInfo.channelName}" />
                </attr>
            </attr>
            <attr sel=".description">
                <attr sel="div[0]">
                    <attr sel="#subCount" th:text="'구독자 '+ ${chanInfo.subCount}+'명'"/>
                    <attr sel=".user-info">
                        <attr sel="span" th:text="'관리자 '+${chanInfo.channelManagerDtos()[0].user().nickname}"/>
                    </attr>
                </attr>
                <attr sel="#chanDesc" th:text="${chanInfo.description}"/>
            </attr>
        </attr>
    </attr>

    <attr sel=".article-head">
        <attr sel=".title" th:text="${post.title}"/>
        <attr sel=".user-info" th:text="${post.userDto.nickname}"/>

        <attr sel=".article-info">
            <attr sel=".body[0]" th:text="${post.rating}"/>
            <attr sel=".body[1]" th:text="${post.hit}"/>
            <attr sel=".date">
                <attr sel=".body" th:datetime="${post.createdDate}" th:text="${#temporals.format(post.createdDate, 'yy/MM/dd HH:mm')}">
                    <attr sel="time" th:datetime="${post.createdDate}" th:text="${#temporals.format(post.createdDate, 'yy/MM/dd HH:mm')}" />
                </attr>
            </attr>
        </attr>

    </attr>

    <attr sel=".article-body">
        <attr sel=".article-content">
            <attr sel="p" th:text="${post.content}"/>
        </attr>
        <attr sel="#rateUpForm" th:action="@{chanInfo.slug + '/post/'+ post.id +'/rateUp'}">
            <attr sel="#ratingUp" th:text="${post.rating}"/>
        </attr>
    </attr>


    <attr sel=".list-area">
        <attr sel=".comment-wrapper" th:each="comment : ${post.comments}">
            <attr sel="div.comment-item" th:id="'c_'+${comment.commentId}">
                <attr sel=".content">
                    <attr sel=".user-info">
                        <attr sel="span" th:text="${comment.userDto.nickname}"/>
                    </attr>
                    <attr sel=".right">
                        <attr sel="time" th:text="${#temporals.format(comment.createdDate, 'yy/MM/dd HH:mm:ss')}"/>
                        <attr sel=".reply-link" th:data-target="${comment.commentId}" th:href="'javascript:void(0)'"/>
                    </attr>
                    <attr sel=".message">
                        <attr sel=".text" th:text="${comment.content}" th:href="'javascript:void(0)'"/>
                    </attr>
                </attr>
            </attr>
            <attr sel=".reply-form" th:replace="replyForm :: .reply-form"></attr>
            <attr sel=".comment-wrapper/comment-wrapper" th:if="${not comment.replies.isEmpty && comment.commentId == reply.parentId}" th:each="reply : ${comment.replies}">
                <attr sel=".comment-item" th:id="${reply.replyId}">
                    <attr sel=".user-info/span" th:text="${reply.userDto.nickname}"/>
                    <attr sel=".reply-link" th:data-target="${reply.replyId}"/>
                    <attr sel=".message/.text/pre" th:text="${reply.content}"/>
                </attr>
            </attr>
        </attr>
    </attr>

    <attr sel="#commentForm" sec:authorize="!isAuthenticated()" th:visible="hidden"/>
    <attr sel="#commentForm" sec:authorize="isAuthenticated()" th:visible="visible" th:action="@{${post.id + '/comment'}}" th:method="'POST'">
        <attr sel="input[name='slug']" th:value="${chanInfo.slug}"/>
        <attr sel="input[name='postId']" th:value="${post.id}" />
        <attr sel="#commentWriter" th:value="${userInfo.nickname}"/>

        <attr sel=".reply-form-textarea" th:style="'height:99.5px;outline:none;'" th:required="'required'">
            <attr sel=".reply-from__submit-button-wrapper">
                <attr sel="#commentFormButton" th:type="'submit'"></attr>
            </attr>
        </attr>
    </attr>

</thlogic>